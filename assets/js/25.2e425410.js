(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{342:function(a,s,t){"use strict";t.r(s);var r=t(14),e=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"arthas"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#arthas"}},[a._v("#")]),a._v(" Arthas")]),a._v(" "),s("p",[a._v("你是否遇到过这种情况，每次运维帮你项目部署后，你发现线上代码还是老版本。然后陷入扯皮之中。\nartahs这款工具，能让你直接在线上查看运行中的代码，以后在扯皮就直接把代码截图到群里\n然后发个/:8*符号。（会不会被打死另说）")]),a._v(" "),s("h2",{attrs:{id:"热修复"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#热修复"}},[a._v("#")]),a._v(" 热修复")]),a._v(" "),s("ol",[s("li",[a._v("反编译代码（ats）")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("jad --source-only \ncom.example.demo.arthas.user.UserController "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" /tmp/UserController.java\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("编辑代码")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /tmp/UserController.java\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("sc查找classloader（ats）")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("sc "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" *UserController "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" classLoaderHash\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[a._v("mc编译")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mc")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-c")]),a._v(" 1be6f5c3 /tmp/UserController.java "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" /tmp\n\n------或者\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("mc")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--classLoaderClass")]),a._v(" \norg.springframework.boot.loader.LaunchedURLClassLoader \n/tmp/UserController.java "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" /tmp\n")])])]),s("ol",{attrs:{start:"5"}},[s("li",[a._v("retransform加载")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("retransform /tmp/com/example/demo/arthas/user/UserController.class\n")])])]),s("h2",{attrs:{id:"查看线上运行代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看线上运行代码"}},[a._v("#")]),a._v(" 查看线上运行代码")])])}),[],!1,null,null,null);s.default=e.exports}}]);